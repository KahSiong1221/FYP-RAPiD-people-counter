Jetson Xavier NX:

ONNX Model [TensorRT engine]
10 runs FPS: [9.31, 9.25, 9.19, 9.3, 9.36, 9.38, 9.41, 9.37, 9.38, 9.41]

Pytorch Model
10 runs FPS: [11.3, 11.73, 11.69, 11.79, 11.83, 11.77, 11.73, 11.78, 11.8, 11.7]

Jetson Orin:

Pytorch Model [using CUDA]
1 run FPS: 18.88
1 run with writer FPS: 9.91
10 runs FPS: [18.82, 18.91, 18.87, 18.84, 18.91, 18.78, 18.81, 18.73, 18.88, 18.86]

Pytorch Model [without CUDA]
1 run FPS: 6.67

ONNX Model [TensorRT engine]
10 runs FPS: [16.82, 16.82, 16.84, 16.78, 16.81, 16.81, 16.85, 16.79, 16.8, 16.78]
each run cost ~89s

31/03/2024 - Jetson Xavier NX
Pytorch+CUDA
FPS: [12.43, 12.98, 13.04, 12.96, 12.95, 12.96, 12.97, 12.96, 13.03, 13.02]

ONNX+CUDA
FPS: [10.93, 12.92, 12.89, 12.94, 12.87, 12.91, 12.89, 12.92, 12.87, 12.92]
with IOBinding
FPS: [10.65, 12.9, 12.95, 12.95, 12.97, 12.96, 12.96, 12.98, 12.97, 12.98]

ONNX+TensorRT trt_max_workspace_size:1GB(default)
FPS: [12.86, 13.01, 13.04, 12.96, 11.68, 11.79, 11.98, 11.89, 12.7, 12.78]

ONNX+TensorRT trt_max_workspace_size:2GB
FPS: [13.15, 13.29, 12.66, 13.39, 13.41, 13.44, 13.41, 13.42, 13.36, 13.43]
FPS: [12.8, 12.9, 13.03, 12.9, 12.94, 12.91, 12.98, 12.91, 12.97, 12.94]
run on cached engine
FPS: [13.59, 13.79, 13.81, 13.5, 13.48]
FPS: [13.37, 13.44, 13.52, 13.39, 13.58, 13.53, 13.49, 13.53, 13.51, 13.43]
with IOBinding
FPS: [13.3, 13.37, 13.31, 13.36, 13.29, 13.29, 13.35, 13.33, 13.33, 13.39]

ONNX+TensorRT trt_max_workspace_size:3GB
FPS: [12.75, 12.5, 12.29, 12.46, 12.5, 12.66, 12.72, 12.76, 12.72, 12.77]

ONNX+TensorRT trt_max_workspace_size:4GB
FPS: [12.84, 12.95, 12.95, 13.0, 12.96, 13.01, 13.0, 13.0, 12.98, 13.01]
FPS: [12.84, 12.98, 12.95, 13.07, 12.98, 12.95, 13.03, 13.03, 13.02, 13.03, 13.04, 13.05, 13.1, 13.09, 13.06]
run on cached engine
FPS: [13.45, 13.6, 13.66, 13.72, 13.66, 13.51, 13.52, 13.51, 13.5, 13.4]

Observations:

-   While using jtop, fps drop 1 unit
-   Increase gpu_mem_limit for ONNX+CUDA has no effect

Jetson Xavier NX

-   cuda 11.4
-   jetpack 5.1.1

RTX4090

-   cuda 12.3

TODO:

1. Implementation

    - TensorRT Engine
    - Quantization

2. Accuracy Review
3. Experiments
    - PyTorch+CPU
        - Xavier NX
        - Orin
        - RTX4090 > FPS: [40.13, 40.19, 39.78, 40.33, 39.73, 40.68, 41.34, 40.87, 41.39, 40.82]
    - PyTorch+CUDA [1024]
        - (v)Xavier NX > FPS: [12.43, 12.98, 13.04, 12.96, 12.95, 12.96, 12.97, 12.96, 13.03, 13.02]
        - (v)Orin > FPS: [20.78, 20.87, 20.83, 20.88, 20.89, 20.88, 20.92, 20.84, 20.85, 20.87]
        - (v)RTX4090 > FPS: [90.27, 91.81, 92.66, 91.16, 92.22, 91.84, 91.08, 91.17, 92.30, 91.17]
    - PyTorch+CUDA [608]
        - Xavier NX
        - Orin > FPS: [25.36, 25.47, 25.34, 25.47, 25.45, 25.5, 25.47, 25.58, 25.61, 25.6]
        - RTX4090
    - ONNX+CPU
        - Xavier NX > FPS: [3.8, 3.81, 3.82, 3.83, 3.84, 3.83, 3.82, 3.83, 3.83, 3.83]
        - Orin
        - RTX4090 > FPS: [52.21, 53.94, 52.75, 51.69, 52.47, 56.01, 51.32, 51.63, 50.84, 53.86]
    - ONNX+CUDA
        - (v)Xavier NX > FPS: [10.82, 12.97, 12.97, 12.95, 12.95, 12.95, 13.02, 13.03, 13.01, 12.97]
        - (v)Orin > FPS: [3.48, 20.40, 20.50, 20.48, 20.56, 20.46, 20.53, 20.53, 20.51, 20.54]
        - (v)RTX4090 > FPS: [47.4, 92.55, 92.37, 93.43, 92.92, 91.83, 91.17, 89.89, 92.13, 89.8]
    - ONNX+CUDA (IOBinding)
        - (v)Xavier NX > FPS: [10.65, 12.9, 12.95, 12.95, 12.97, 12.96, 12.96, 12.98, 12.97, 12.98]
        - Orin > FPS: [3.5, 20.73, 20.82, 20.9, 20.86, 20.82, 20.89, 20.85, 20.84, 20.87]
        - RTX4090 > FPS: [47.78, 91.54, 93.24, 90.13, 93.73, 91.72, 91.52, 93.64, 92.51, 90.96]
    - ONNX+TensorRT (trt_max_workspace_size = 1GB)
        - Xavier NX > FPS: [13.42, 13.51, 13.49, 13.53, 13.6, 13.59, 13.52, 13.45, 13.54, 13.51]
        - Orin > FPS: [21.88, 21.78, 21.77, 21.73, 21.80, 21.78, 21.77, 21.88, 21.88, 21.97]
        - RTX4090 > FPS: [91.79, 92.02, 91.35, 92.0, 90.45, 91.66, 89.06, 88.35, 89.24, 91.95]
    - ONNX+TensorRT (trt_max_workspace_size = 2GB)
        - Xavier NX > FPS: [13.37, 13.44, 13.52, 13.39, 13.58, 13.53, 13.49, 13.53, 13.51, 13.43]
        - (v)Orin > FPS: [21.98, 21.96, 21.92, 21.91, 21.88, 21.87, 21.95, 21.88, 21.88, 21.89]
        - RTX4090 > FPS: [92.38, 91.89, 92.52, 93.12, 92.78, 92.22, 92.83, 92.64, 94.15, 91.84]
    - ONNX+TensorRT (trt_max_workspace_size = 4GB)
        - Xavier NX > FPS: [13.45, 13.6, 13.66, 13.72, 13.66, 13.51, 13.52, 13.51, 13.5, 13.4]
        - Orin
        - RTX4090 > FPS: [93.19, 92.34, 94.63, 92.72, 93.19, 92.72, 93.43, 92.58, 90.07, 95.07]
    - ONNX+TensorRT (trt_max_workspace_size = 8GB)
        - RTX4090 > FPS: [91.78, 92.73, 90.97, 91.7, 90.76, 93.86, 91.63, 90.95, 92.17, 90.83]
    - ONNX+TensorRT (trt_max_workspace_size = 2GB & IOBinding)
        - Xavier NX > FPS: [13.3, 13.37, 13.31, 13.36, 13.29, 13.29, 13.35, 13.33, 13.33, 13.39]
        - Orin > FPS: [21.76, 21.7, 21.75, 21.76, 21.84, 21.89, 21.79, 21.84, 21.81, 21.8]
        - RTX4090 > FPS: [90.64, 91.39, 91.61, 91.48, 90.96, 93.0, 92.08, 92.79, 91.44, 92.46]
    - TensorRT
        - Xavier NX
        - Orin
        - RTX4090

ONNX+TensorRT
rtx4090 run RAPiD on all frames
testvideo5.mp4 - FPS: [30.31, 30.05, 29.79, 29.97, 30.24, 29.95, 29.88, 29.91, 30.21, 30.15]
testvideo3.mp4 - FPS: [30.65, 30.87, 31.11, 31.2, 30.87, 31.23, 30.99, 30.74, 31.02, 30.79]
